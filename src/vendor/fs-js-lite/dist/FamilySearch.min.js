var FamilySearch=function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){function n(e){return function(t,o,n){"function"==typeof o&&(n=o,o={}),o.method=e,this.request(t,o,n)}}var r=o(1),i=o(2),s=o(3),a=o(4),c=o(5),u=o(13),d=function(e){this.appKey="",this.environment="integration",this.redirectUri="",this.tokenCookie="FS_AUTH_TOKEN",this.maxThrottledRetries=10,this.saveAccessToken=!1,this.accessToken="",this.jwt="",this.middleware={request:[c.url,c.defaultAcceptHeader,c.authorizationHeader,c.disableAutomaticRedirects,c.body],response:[u.redirect,u.throttling,u.json]},this.config(e)};d.prototype.config=function(e){if(this.appKey=e.appKey||this.appKey,this.environment=e.environment||this.environment,this.redirectUri=e.redirectUri||this.redirectUri,this.tokenCookie=e.tokenCookie||this.tokenCookie,this.tokenCookiePath=e.tokenCookiePath||this.tokenCookiePath,this.maxThrottledRetries=e.maxThrottledRetries||this.maxThrottledRetries,this.saveAccessToken=e.saveAccessToken===!0||this.saveAccessToken,e.accessToken&&this.setAccessToken(e.accessToken),Array.isArray(e.pendingModifications)&&e.pendingModifications.length>0&&this.addRequestMiddleware(c.pendingModifications(e.pendingModifications)),parseInt(e.requestInterval,10)&&this.addRequestMiddleware(c.requestInterval(parseInt(e.requestInterval,10))),e.saveAccessToken&&!this.getAccessToken()){var t=r.get(this.tokenCookie);t&&this.setAccessToken(t)}},d.prototype.oauthRedirect=function(e){window.location.href=this.oauthRedirectURL(e)},d.prototype.oauthRedirectURL=function(e){var t=this.identHost()+"/cis-web/oauth2/v3/authorization?response_type=code&scope=openid profile email qualifies_for_affiliate_account country&client_id="+this.appKey+"&redirect_uri="+this.redirectUri;return e&&(t+="&state="+e),t},d.prototype.oauthResponse=function(e,t){1===arguments.length&&(t=e,e=void 0);var o=a.getParameterByName("state");if(e&&e!==o)return!1;var n=a.getParameterByName("code");return!!n&&(this.oauthToken(n,t),!0)},d.prototype.oauthToken=function(e,t){var o=this;o.post(o.identHost()+"/cis-web/oauth2/v3/token?redirect_uri="+this.redirectUri,{body:{grant_type:"authorization_code",code:e,client_id:o.appKey},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(e,n){o.jwt=n.data.id_token,o.processOauthResponse(e,n,t)})},d.prototype.oauthUnauthenticatedToken=function(e,t){var o=this;o.post(o.identHost()+"/cis-web/oauth2/v3/token",{body:{grant_type:"unauthenticated_session",ip_address:e,client_id:o.appKey},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(e,n){o.processOauthResponse(e,n,t)})},d.prototype.oauthPassword=function(e,t,o){var n=this;this.post(this.identHost()+"/cis-web/oauth2/v3/token",{body:{grant_type:"password",client_id:this.appKey,username:e,password:t},headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(e,t){n.processOauthResponse(e,t,o)})},d.prototype.processOauthResponse=function(e,t,o){t&&200===t.statusCode&&t.data&&this.setAccessToken(t.data.access_token),o&&setTimeout(function(){o(e,t)})},d.prototype.setAccessToken=function(e){return this.accessToken=e,this.saveAccessToken&&r.set(this.tokenCookie,e,{expires:1,path:this.tokenCookiePath}),this},d.prototype.getAccessToken=function(){return this.accessToken},d.prototype.deleteAccessToken=function(){return this.accessToken=void 0,this.saveAccessToken&&r.remove(this.tokenCookie,{path:this.tokenCookiePath}),this},d.prototype.addRequestMiddleware=function(e){return this.middleware.request.push(e),this},d.prototype.addResponseMiddleware=function(e){return this.middleware.response.push(e),this},d.prototype.get=n("GET"),d.prototype.post=n("POST"),d.prototype.head=n("HEAD"),d.prototype.delete=n("DELETE"),d.prototype.request=function(e,t,o){"function"==typeof t&&(o=t,t={}),this._execute(new i(e,t,o),o)},d.prototype._execute=function(e,t){function o(o,r){o?setTimeout(function(){t(o)}):n._runResponseMiddleware(e,r,function(e){setTimeout(function(){e?t(e):t(void 0,r)})})}var n=this;n._runRequestMiddleware(e,function(t,n){t||n?o(t,n):s(e,o)})},d.prototype._runRequestMiddleware=function(e,t){var o=this;a.asyncEach(this.middleware.request,function(n,r){n(o,e,function(e,o){e||o?t(e,o):r()})},t)},d.prototype._runResponseMiddleware=function(e,t,o){var n=this;a.asyncEach(this.middleware.response,function(r,i){r(n,e,t,function(e,t){e?o(e):"undefined"==typeof t&&i()})},o)},d.prototype.identHost=function(){switch(this.environment){case"production":return"https://ident.familysearch.org";case"beta":return"https://identbeta.familysearch.org";default:return"https://identint.familysearch.org"}},d.prototype.platformHost=function(){switch(this.environment){case"production":return"https://api.familysearch.org";case"beta":return"https://beta.familysearch.org";default:return"https://api-integ.familysearch.org"}},e.exports=d},function(e,t,o){var n,r;!function(i){var s=!1;if(n=i,r="function"==typeof n?n.call(t,o,t,e):n,!(void 0!==r&&(e.exports=r)),s=!0,e.exports=i(),s=!0,!s){var a=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=a,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(o){function n(t,r,i){var s;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},n.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}r=o.write?o.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,i[u]!==!0&&(c+="="+i[u]));return document.cookie=t+"="+r+c}t||(s={});for(var d=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,h=0;h<d.length;h++){var f=d[h].split("="),l=f.slice(1).join("=");this.json||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var y=f[0].replace(p,decodeURIComponent);if(l=o.read?o.read(l,y):o(l,y)||l.replace(p,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch(e){}if(t===y){s=l;break}t||(s[y]=l)}catch(e){}}return s}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,o){n(t,"",e(o,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},function(e,t){var o=function(e,t,o){this.url=e,this.callback=o||function(){},this.method="GET",this.headers={},this.retries=0,this.options={};var n;for(n in t)if(t.hasOwnProperty(n))switch(n){case"method":case"body":case"retries":this[n]=t[n];break;case"headers":this.headers=JSON.parse(JSON.stringify(t.headers));break;default:this.options[n]=t[n]}};o.prototype.hasHeader=function(e){return"undefined"!=typeof this.headers[e]},o.prototype.setHeader=function(e,t){return this.headers[e]=t,this},o.prototype.getHeader=function(e){return this.headers[e]},o.prototype.getHeaders=function(){return this.headers},o.prototype.isPlatform=function(){return this.url.indexOf("/platform/")!==-1},e.exports=o},function(e,t){function o(e,t){for(var o,r={};o=n.exec(e.getAllResponseHeaders());)r[o[1].toLowerCase()]=o[2];return{statusCode:e.status,statusText:e.statusText,headers:r,originalUrl:t.url,effectiveUrl:t.url,redirected:!1,requestMethod:t.method,requestHeaders:t.headers,body:e.responseText,retries:0,throttled:!1}}var n=/^(.*?):[ \t]*([^\r\n]*)$/gm;e.exports=function(e,t){var n=new XMLHttpRequest;n.open(e.method,e.url);var r=e.getHeaders();for(var i in r)r.hasOwnProperty(i)&&n.setRequestHeader(i,r[i]);n.onload=function(){var r=o(n,e);setTimeout(function(){t(null,r)})},n.onerror=function(e){setTimeout(function(){t(e)})},n.send(e.body)}},function(e,t){e.exports={urlEncode:function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},getParameterByName:function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},asyncEach:function(e,t,o){function n(r){r===e.length?setTimeout(o):t(e[r],function(){setTimeout(function(){n(++r)})})}n(0)}}},function(e,t,o){e.exports={authorizationHeader:o(6),body:o(7),defaultAcceptHeader:o(8),disableAutomaticRedirects:o(9),pendingModifications:o(10),requestInterval:o(11),url:o(12)}},function(e,t){e.exports=function(e,t,o){!t.hasHeader("Authorization")&&e.getAccessToken()&&t.isPlatform()&&t.setHeader("Authorization","Bearer "+e.getAccessToken()),o()}},function(e,t,o){var n=o(4);e.exports=function(e,t,o){!t.body||"POST"!==t.method&&"PUT"!==t.method||(!t.hasHeader("Content-Type")&&t.isPlatform()&&t.setHeader("Content-Type","application/x-fs-v1+json"),"string"!=typeof t.body&&(t.hasHeader("Content-Type")&&t.getHeader("Content-Type").indexOf("json")!==-1?t.body=JSON.stringify(t.body):t.body=n.urlEncode(t.body))),o()}},function(e,t){e.exports=function(e,t,o){!t.hasHeader("Accept")&&t.isPlatform()&&t.setHeader("Accept","application/x-fs-v1+json"),o()}},function(e,t){e.exports=function(e,t,o){!t.hasHeader("X-Expect-Override")&&t.isPlatform()&&t.setHeader("X-Expect-Override","200-ok"),o()}},function(e,t){e.exports=function(e){var t=e.join(",");return function(e,o,n){o.headers["X-FS-Feature-Tag"]=t,n()}}},function(e,t){e.exports=function(e){function t(e){c.push(e),o()}function o(){s||(s=setInterval(n,e))}function n(){if(!i())if(c.length){var e=c.shift();r(e)}else s&&clearInterval(s)}function r(e){a=Date.now(),e()}function i(){return Date.now()-a<e}var s,a=0,c=[];return function(e,o,n){c.length||i()?t(n):r(n)}}},function(e,t){e.exports=function(e,t,o){t.url.indexOf("https://")===-1&&(t.url=e.platformHost()+t.url),o()}},function(e,t,o){e.exports={json:o(14),redirect:o(15),throttling:o(16)}},function(e,t){e.exports=function(e,t,o,n){var r=o.headers["content-type"];if(r&&r.indexOf("json")!==-1)try{o.data=JSON.parse(o.body)}catch(e){}n()}},function(e,t){e.exports=function(e,t,o,n){var r=o.headers.location;if(t.options.followRedirect&&r&&r!==t.url){var i=t.url;return t.url=o.headers.location,e._execute(t,function(e,o){o&&(o.originalUrl=i,o.redirected=!0),setTimeout(function(){t.callback(e,o)})}),n(void 0,!0)}n()}},function(e,t){e.exports=function(e,t,o,n){if(429===o.statusCode&&t.retries<e.maxThrottledRetries){var r=1e3*parseInt(o.headers.retry||o.headers["retry-after"],10)||1e3;return setTimeout(function(){e._execute(t,function(e,o){o.throttled=!0,o.retries=++t.retries,setTimeout(function(){t.callback(e,o)})})},r),n(void 0,!0)}n()}}]);